<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bug>
	<id>TRUNK-609</id>
	<title>Error when using "Edit this Patient" button</title>
	<description>
		<paragraph id="1">
			<sentence id="1.1">The following critical error occurs when trying to "Edit this Patient" when the save button is clicked.</sentence>
			<sentence id="1.2">This occurs in OpenMRS Version: 1.4.0.23 RC Build 7055.</sentence>
		</paragraph>
		<paragraph id="2">
			<sentence id="2.1">{code}An Internal Error has Occurred
org.openmrs.module.ModuleException</sentence>
		</paragraph>
		<paragraph id="3">
			<sentence id="3.1">a different object with the same identifier value was already associated with the session: [org.openmrs.PatientTRAC-82814]</sentence>
		</paragraph>
		<paragraph id="4">
			<sentence id="4.1">Consult the help document.</sentence>
			<sentence id="4.2">Contact your friendly neighborhood administrator if it cannot be resolved.</sentence>
		</paragraph>
		<paragraph id="5">
			<sentence id="5.1">Hide stack trace</sentence>
			<sentence id="5.2">org.openmrs.module.mrngen.advice.PatientServiceAroundAdvisor$PatientServiceAroundAdvice.invoke(Unknown Source)</sentence>
			<sentence id="5.3">org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)</sentence>
			<sentence id="5.4">org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)</sentence>
			<sentence id="5.5">$Proxy119.savePatient(Unknown Source)</sentence>
			<sentence id="5.6">org.openmrs.web.controller.patient.PatientFormController.onSubmit(Unknown Source)</sentence>
			<sentence id="5.7">org.springframework.web.servlet.mvc.SimpleFormController.processFormSubmission(SimpleFormController.java:267)</sentence>
			<sentence id="5.8">org.openmrs.web.controller.person.PersonFormController.processFormSubmission(Unknown Source)</sentence>
			<sentence id="5.9">org.openmrs.web.controller.patient.PatientFormController.processFormSubmission(Unknown Source)</sentence>
			<sentence id="5.10">org.springframework.web.servlet.mvc.AbstractFormController.handleRequestInternal(AbstractFormController.java:265)</sentence>
			<sentence id="5.11">org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)</sentence>
			<sentence id="5.12">org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)</sentence>
			<sentence id="5.13">org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:875)</sentence>
			<sentence id="5.14">org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:809)</sentence>
			<sentence id="5.15">org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:476)</sentence>
			<sentence id="5.16">org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:441)</sentence>
			<sentence id="5.17">javax.servlet.http.HttpServlet.service(HttpServlet.java:710)</sentence>
			<sentence id="5.18">javax.servlet.http.HttpServlet.service(HttpServlet.java:803)</sentence>
			<sentence id="5.19">org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)</sentence>
			<sentence id="5.20">org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)</sentence>
			<sentence id="5.21">org.openmrs.web.OpenmrsFilter.doFilter(Unknown Source)</sentence>
			<sentence id="5.22">org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)</sentence>
			<sentence id="5.23">org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)</sentence>
			<sentence id="5.24">org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)</sentence>
			<sentence id="5.25">org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:75)</sentence>
			<sentence id="5.26">org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)</sentence>
			<sentence id="5.27">org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)</sentence>
			<sentence id="5.28">org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)</sentence>
			<sentence id="5.29">org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:174)</sentence>
			<sentence id="5.30">org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)</sentence>
			<sentence id="5.31">org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)</sentence>
			<sentence id="5.32">org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)</sentence>
			<sentence id="5.33">org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:151)</sentence>
			<sentence id="5.34">org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:874)</sentence>
			<sentence id="5.35">org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)</sentence>
			<sentence id="5.36">org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)</sentence>
			<sentence id="5.37">org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)</sentence>
			<sentence id="5.38">org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)</sentence>
			<sentence id="5.39">java.lang.Thread.run(Thread.java:619)</sentence>
		</paragraph>
		<paragraph id="6">
			<sentence id="6.1">OpenMRS Version: 1.4.0.23 RC Build 7055
Database Version: 1.4.0.23
{code}</sentence>
		</paragraph>
		<paragraph id="7">
			<sentence id="7.1">I downloaded and compiled the the 1.4.x branch, build 7335, and the problem is fixed there.</sentence>
			<sentence id="7.2">Might I recommend another official release of OpenMRS 1.4 rather than Build 7055.</sentence>
		</paragraph>
	</description>
</bug>
