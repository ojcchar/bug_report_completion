<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bug>
	<id>HHH-1805</id>
	<title>Incorrect query parsing cause NullPointerException</title>
	<description>
		<paragraph id="1">
			<sentence id="1.1">Incorrect HQL query (without AS object) cause NullPointerException</sentence>
		</paragraph>
		<paragraph id="2">
			<sentence id="2.1">Incorrect: "select o from MyObject where o.name = ?</sentence>
			<sentence id="2.2">1"
Correct: "select o from MyObject as o where o.name = ?</sentence>
			<sentence id="2.3">1"</sentence>
		</paragraph>
		<paragraph id="3">
			<sentence id="3.1">The next code with incorrect query cause NullPointerException:
em.createQuery("select o from MyObject where o.name = ?</sentence>
			<sentence id="3.2">1").</sentence>
			<sentence id="3.3">setParameter(1, "some_name").</sentence>
			<sentence id="3.4">getResultList();</sentence>
		</paragraph>
		<paragraph id="4">
			<sentence id="4.1"> java.lang.NullPointerException</sentence>
			<sentence id="4.2">	at org.hibernate.hql.ast.tree.IdentNode.resolveAsNakedComponentPropertyRefLHS(IdentNode.java:195)</sentence>
			<sentence id="4.3">	at org.hibernate.hql.ast.tree.IdentNode.resolve(IdentNode.java:85)</sentence>
			<sentence id="4.4">	at org.hibernate.hql.ast.tree.DotNode.resolveFirstChild(DotNode.java:139)</sentence>
			<sentence id="4.5">	at org.hibernate.hql.ast.HqlSqlWalker.lookupProperty(HqlSqlWalker.java:469)</sentence>
			<sentence id="4.6">	at org.hibernate.hql.antlr.HqlSqlBaseWalker.addrExpr(HqlSqlBaseWalker.java:4316)</sentence>
			<sentence id="4.7">	at org.hibernate.hql.antlr.HqlSqlBaseWalker.expr(HqlSqlBaseWalker.java:1211)</sentence>
			<sentence id="4.8">	at org.hibernate.hql.antlr.HqlSqlBaseWalker.exprOrSubquery(HqlSqlBaseWalker.java:4032)</sentence>
			<sentence id="4.9">	at org.hibernate.hql.antlr.HqlSqlBaseWalker.comparisonExpr(HqlSqlBaseWalker.java:3880)</sentence>
			<sentence id="4.10">	at org.hibernate.hql.antlr.HqlSqlBaseWalker.logicalExpr(HqlSqlBaseWalker.java:1758)</sentence>
			<sentence id="4.11">	at org.hibernate.hql.antlr.HqlSqlBaseWalker.logicalExpr(HqlSqlBaseWalker.java:1683)</sentence>
			<sentence id="4.12">	at org.hibernate.hql.antlr.HqlSqlBaseWalker.logicalExpr(HqlSqlBaseWalker.java:1683)</sentence>
			<sentence id="4.13">	at org.hibernate.hql.antlr.HqlSqlBaseWalker.whereClause(HqlSqlBaseWalker.java:776)</sentence>
			<sentence id="4.14">	at org.hibernate.hql.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:577)</sentence>
			<sentence id="4.15">	at org.hibernate.hql.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:281)</sentence>
			<sentence id="4.16">	at org.hibernate.hql.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:229)</sentence>
			<sentence id="4.17">	at org.hibernate.hql.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:227)</sentence>
			<sentence id="4.18">	at org.hibernate.hql.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:159)</sentence>
			<sentence id="4.19">	at org.hibernate.hql.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:110)</sentence>
			<sentence id="4.20">	at org.hibernate.engine.query.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:77)</sentence>
			<sentence id="4.21">	at org.hibernate.engine.query.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:56)</sentence>
			<sentence id="4.22">	at org.hibernate.engine.query.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:71)</sentence>
			<sentence id="4.23">	at org.hibernate.impl.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:133)</sentence>
			<sentence id="4.24">	at org.hibernate.impl.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:112)</sentence>
			<sentence id="4.25">	at org.hibernate.impl.SessionImpl.createQuery(SessionImpl.java:1612)</sentence>
			<sentence id="4.26">	at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:76)</sentence>
			<sentence id="4.27">	at org.dicr.isp.data.HibernateDataManager.createConnection(HibernateDataManager.java:696)</sentence>
		</paragraph>
	</description>
</bug>
