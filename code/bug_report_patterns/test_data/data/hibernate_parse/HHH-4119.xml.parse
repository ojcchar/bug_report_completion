<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bug>
	<id>HHH-4119</id>
	<title>Duplicate alias </title>
	<description>
		<paragraph id="1">
			<sentence id="1.1">The mapping file I used:</sentence>
			<sentence id="1.2">&lt;hibernate-mapping package="com.novell.uddi3.hibernate.entities"&gt;</sentence>
			<sentence id="1.3">	&lt;class name="BusinessVO" table="businessvo"&gt;</sentence>
			<sentence id="1.4">		&lt;id name="id" type="string"&gt;</sentence>
			<sentence id="1.5">			&lt;generator class="assigned" /&gt;</sentence>
			<sentence id="1.6">		</id></sentence>
			<sentence id="1.7">		&lt;list name="Contacts" cascade="delete" lazy="true"&gt;</sentence>
			<sentence id="1.8">			&lt;key column="bid" /&gt;</sentence>
			<sentence id="1.9">			&lt;list-index column="sortorder"/&gt;</sentence>
			<sentence id="1.10">			&lt;one-to-many class="ContactVO" /&gt;</sentence>
			<sentence id="1.11">		&lt;/list&gt;</sentence>
			<sentence id="1.12">	&lt;/class&gt;</sentence>
			<sentence id="1.13">	&lt;class name="ContactVO" table="contacts"&gt;</sentence>
			<sentence id="1.14">		&lt;id name="id"&gt;</sentence>
			<sentence id="1.15">			&lt;generator class="native"/&gt;</sentence>
			<sentence id="1.16">		</id></sentence>
			<sentence id="1.17">		&lt;array name="PersonName" cascade="all" table="personnames" fetch="join"&gt;</sentence>
			<sentence id="1.18">			&lt;key column="cid" /&gt;</sentence>
			<sentence id="1.19">			&lt;list-index column="sortorder"/&gt;</sentence>
			<sentence id="1.20">			&lt;composite-element class="org.uddi.v3.core.PersonName"&gt;</sentence>
			<sentence id="1.21">				&lt;property name="_value" type="string" column="personname" length="4000"/&gt;</sentence>
			<sentence id="1.22">			&lt;/composite-element&gt;</sentence>
			<sentence id="1.23">		&lt;/array&gt;</sentence>
			<sentence id="1.24">	&lt;/class&gt;</sentence>
			<sentence id="1.25">&lt;/hibernate-mapping&gt;</sentence>
		</paragraph>
		<paragraph id="2">
			<sentence id="2.1">When I execute a hsql like following:
	Query q = session.createQuery("from BusinessVO b" +
			" left join fetch b.Contacts c" +
			" left join fetch c.PersonName");
	BusinessVO vo = (BusinessVO)q.uniqueResult();</sentence>
		</paragraph>
		<paragraph id="3">
			<sentence id="3.1">From the console, the following sql was created:
 select
 businessvo0_.</sentence>
			<sentence id="3.2">id as id0_0_,
 contacts1_.</sentence>
			<sentence id="3.3">id as id1_1_,
 personname2_.</sentence>
			<sentence id="3.4">cid as cid1__,
 personname2_.</sentence>
			<sentence id="3.5">personname as personname1__,
 personname2_.</sentence>
			<sentence id="3.6">sortorder as sortorder1__,
 contacts1_.</sentence>
			<sentence id="3.7">bid as bid0__,
 contacts1_.</sentence>
			<sentence id="3.8">id as id0__,
 contacts1_.</sentence>
			<sentence id="3.9">sortorder as sortorder0__,
 personname2_.</sentence>
			<sentence id="3.10">cid as cid1__,
 personname2_.</sentence>
			<sentence id="3.11">personname as personname1__,
 personname2_.</sentence>
			<sentence id="3.12">sortorder as sortorder1__ 
 from
 businessvo businessvo0_ 
 left outer join
 contacts contacts1_ 
 on businessvo0_.</sentence>
			<sentence id="3.13">id=contacts1_.</sentence>
			<sentence id="3.14">bid 
 left outer join
 personnames personname2_ 
 on contacts1_.</sentence>
			<sentence id="3.15">id=personname2_.</sentence>
			<sentence id="3.16">cid</sentence>
		</paragraph>
		<paragraph id="4">
			<sentence id="4.1">The alias 'cid1__, personename1__, sortorder1__' are duplicate, is this a bug of hibernate?</sentence>
		</paragraph>
	</description>
</bug>
