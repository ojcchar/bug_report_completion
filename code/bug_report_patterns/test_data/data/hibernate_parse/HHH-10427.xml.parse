<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bug>
	<id>HHH-10427</id>
	<title>ServiceRegistry creates multiple service instances and returns uninitialized services</title>
	<description>
		<paragraph id="1">
			<sentence id="1.1">Service creation in the ServiceRegistry does not seem to be thread safe.</sentence>
			<sentence id="1.2">When a service is requested for the first time, an instance is created by the registry, registered and then initialized.</sentence>
			<sentence id="1.3">When multiple threads request the service for the first time,</sentence>
		</paragraph>
		<paragraph id="2">
			<sentence id="2.1">* the service instance might get created multiple times and</sentence>
			<sentence id="2.2">* some of the threads may receive the a registered, but not yet initialized service instance</sentence>
		</paragraph>
		<paragraph id="3">
			<sentence id="3.1">We created a test case for this on GitHub: https://github.com/abenneke/sandbox/tree/master/hibernate-registry</sentence>
		</paragraph>
		<paragraph id="4">
			<sentence id="4.1">Please note that the number of threads in those tests are rather high to increase the probability for the errors to occur.</sentence>
		</paragraph>
	</description>
</bug>
