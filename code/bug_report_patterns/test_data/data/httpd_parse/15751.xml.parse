<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bug>
	<id>15751</id>
	<title>Rewriting of language negotiated pages fails</title>
	<description>
		<paragraph id="1">
			<sentence id="1.1">If a have a directory "a" with two files: "index.html.en" and "index.html.de",
and query /a/index.html, rewriting rules will be applied to /a/index.html rather
than to the file sent out (i.e. /a/index.html.en (in most cases)).</sentence>
			<sentence id="1.5">/a/index.html doesn't exist on the filesystem.</sentence>
			<sentence id="1.7">The same applies if one queries /a/ only, the DirectoryIndex file is found (i.e.
index.html in this case) and the rewriting rules are applied to index.html
instead of the actual file.</sentence>
			<sentence id="1.8">This used to work with apache 1.3.x.</sentence>
		</paragraph>
		<paragraph id="2">
			<sentence id="2.1">I used a fresh copy of httpd-2.0.43.</sentence>
			<sentence id="2.2">tar.gz and configured it with</sentence>
			<sentence id="2.3">--prefix=/var/tmp/apache2 --enable-so --enable-rewrite --enable-modules=all</sentence>
			<sentence id="2.4">--enable-mods-shared=all,</sentence>
		</paragraph>
		<paragraph id="3">
			<sentence id="3.1">to the standard configuration I added at the end of the file:
RewriteEngine On
RewriteLogLevel 9
RewriteLog /var/tmp/apache2/logs/rwlog
RewriteRule ^(.</sentence>
			<sentence id="3.2">*)       - [L]</sentence>
		</paragraph>
		<paragraph id="4">
			<sentence id="4.1">and the option MultiViews to the DocumentRoot directory</sentence>
		</paragraph>
		<paragraph id="5">
			<sentence id="5.1">to see the following in the logs:</sentence>
		</paragraph>
		<paragraph id="6">
			<sentence id="6.1">==&gt; access_log &lt;==</sentence>
			<sentence id="6.2">... - - [01/Jan/2003:15:01:53 +0100] "GET /a/ HTTP/1.0" 304 0</sentence>
		</paragraph>
		<paragraph id="7">
			<sentence id="7.1">==&gt; rwlog &lt;==</sentence>
			<sentence id="7.2">... - - [01/Jan/2003:15:01:53 +0100]</sentence>
			<sentence id="7.3">[.../sid#6000000000051368][rid#60000000000c14f0/initial] (2) init rewrite engine</sentence>
			<sentence id="7.4">with requested uri /a/</sentence>
			<sentence id="7.5">- - [01/Jan/2003:15:01:53 +0100]</sentence>
			<sentence id="7.6">[.../sid#6000000000051368][rid#60000000000c14f0/initial] (3) applying pattern</sentence>
			<sentence id="7.7">'^(.</sentence>
			<sentence id="7.8">*)' to uri '/a/'</sentence>
			<sentence id="7.9">... - - [01/Jan/2003:15:01:53 +0100]</sentence>
			<sentence id="7.10">[.../sid#6000000000051368][rid#60000000000c14f0/initial] (1) pass through /a/</sentence>
			<sentence id="7.11">... - - [01/Jan/2003:15:01:53 +0100]</sentence>
			<sentence id="7.12">[.../sid#6000000000051368][rid#60000000000c7520/subreq] (2) init rewrite engine</sentence>
			<sentence id="7.13">with requested uri /a/index.</sentence>
			<sentence id="7.14">html</sentence>
			<sentence id="7.15">- - [01/Jan/2003:15:01:53 +0100]</sentence>
			<sentence id="7.16">[.../sid#6000000000051368][rid#60000000000c7520/subreq] (3) applying pattern</sentence>
			<sentence id="7.17">'^(.</sentence>
			<sentence id="7.18">*)' to uri '/a/index.</sentence>
			<sentence id="7.19">html'</sentence>
			<sentence id="7.20">... - - [01/Jan/2003:15:01:53 +0100]</sentence>
			<sentence id="7.21">[.../sid#6000000000051368][rid#60000000000c7520/subreq] (1) pass through</sentence>
			<sentence id="7.22">/a/index.</sentence>
			<sentence id="7.23">html</sentence>
		</paragraph>
		<paragraph id="8">
			<sentence id="8.1">$ ls -la a</sentence>
			<sentence id="8.2">total 16</sentence>
			<sentence id="8.3">drwxr-xr-x    2 adam     users        4096 Jan  1 15:05 .</sentence>
			<sentence id="8.4">drwxr-xr-x    3 adam     users        4096 Jan  1 14:30 .</sentence>
			<sentence id="8.5">.</sentence>
			<sentence id="8.6">-rw-r--r--    1 adam     users           8 Jan  1 14:31 index.html.de</sentence>
			<sentence id="8.7">-rw-r--r--    1 adam     users           8 Jan  1 14:34 index.html.en</sentence>
		</paragraph>
	</description>
</bug>
