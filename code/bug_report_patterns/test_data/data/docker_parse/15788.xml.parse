<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bug>
	<id>15788</id>
	<title>[1.8.1/1.9] Docker containers forget how to communicate with network</title>
	<description>
		<paragraph id="1">
			<sentence id="1.1">When launching a container it will not be able to connect with other containers or outside network.</sentence>
			<sentence id="1.2">Not sure if this is related to the #15341 error.</sentence>
			<sentence id="1.3">I've had the same issue with 1.8.1 and 1.9.</sentence>
		</paragraph>
		<paragraph id="2">
			<sentence id="2.1">Very hard to reproduce and not sure what to look for when it happens.</sentence>
			<sentence id="2.2">Docker inspect shows they have the IP address assigned.</sentence>
		</paragraph>
		<paragraph id="3">
			<sentence id="3.1">```
$ uname -a
Linux host 3.13.0-61-generic #100-Ubuntu SMP Wed Jul 29 11:21:34 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
```</sentence>
		</paragraph>
		<paragraph id="4">
			<sentence id="4.1">```
# docker version
Client:
 Version: 1.9.0-dev
 API version: 1.21
 Go version: go1.4.2
 Git commit: bba762b
 Built: Sun Aug 16 09:11:29 UTC 2015
 OS/Arch: linux/amd64</sentence>
		</paragraph>
		<paragraph id="5">
			<sentence id="5.1">Server:
 Version: 1.9.0-dev
 API version: 1.21
 Go version: go1.4.2
 Git commit: bba762b
 Built: Sun Aug 16 09:11:29 UTC 2015
 OS/Arch: linux/amd64
```</sentence>
		</paragraph>
		<paragraph id="6">
			<sentence id="6.1">```
# docker info
Containers: 1048
Images: 215
Storage Driver: aufs
 Root Dir: /home/docker/data/aufs
 Backing Filesystem: extfs
 Dirs: 2313
 Dirperm1 Supported: false
Execution Driver: native-0.2
Logging Driver: json-file
Kernel Version: 3.13.0-61-generic
Operating System: Ubuntu 14.04.3 LTS
CPUs: 8
Total Memory: 94.41 GiB
Debug mode (server): true
File Descriptors: 70
Goroutines: 140
System Time: 2015-08-24T11:51:39.356058733+02:00
EventsListeners: 1
Init SHA1:
Init Path: /usr/bin/docker
Docker Root Dir: /home/docker/data
```</sentence>
		</paragraph>
		<paragraph id="7">
			<sentence id="7.1">```</sentence>
			<sentence id="7.2">root@host:~# docker run -it ubuntu bash</sentence>
			<sentence id="7.3">Error response from daemon: Cannot start container 68080554605abea4e9cf83632ac130a8c0588136a43a5c40755ef759eaf946a9: could not set link up for host interface vethbe5afcf: no such device</sentence>
			<sentence id="7.4">root@host:~# docker run -it ubuntu bash</sentence>
			<sentence id="7.5">root@7a8e403ffaea:/# ping 8.8.8.8</sentence>
			<sentence id="7.6">PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.</sentence>
			<sentence id="7.7">64 bytes from 8.8.8.8: icmp_seq=1 ttl=58 time=4.15 ms</sentence>
			<sentence id="7.8">64 bytes from 8.8.8.8: icmp_seq=2 ttl=58 time=4.02 ms</sentence>
			<sentence id="7.9">^C</sentence>
			<sentence id="7.10">-- 8.8.8.8 ping statistics ---</sentence>
			<sentence id="7.11">2 packets transmitted, 2 received, 0% packet loss, time 1001ms</sentence>
			<sentence id="7.12">rtt min/avg/max/mdev = 4.020/4.089/4.159/0.094 ms</sentence>
			<sentence id="7.13">root@7a8e403ffaea:/# exit</sentence>
			<sentence id="7.14">exit</sentence>
			<sentence id="7.15">root@host:~# docker run --rm -it ubuntu bash</sentence>
			<sentence id="7.16">root@880cc1d230ee:/# ping 8.8.8.8</sentence>
			<sentence id="7.17">PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.</sentence>
			<sentence id="7.18">From 172.17.1.225 icmp_seq=1 Destination Host Unreachable</sentence>
			<sentence id="7.19">From 172.17.1.225 icmp_seq=2 Destination Host Unreachable</sentence>
			<sentence id="7.20">From 172.17.1.225 icmp_seq=3 Destination Host Unreachable</sentence>
			<sentence id="7.21">^C</sentence>
			<sentence id="7.22">-- 8.8.8.8 ping statistics ---</sentence>
			<sentence id="7.23">6 packets transmitted, 0 received, +3 errors, 100% packet loss, time 4999ms</sentence>
			<sentence id="7.24">```</sentence>
		</paragraph>
	</description>
</bug>
