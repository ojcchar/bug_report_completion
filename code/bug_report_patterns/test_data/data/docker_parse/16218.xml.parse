<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bug>
	<id>16218</id>
	<title>Invalid repository name error when full image ID is used in FROM</title>
	<description>
		<paragraph id="1">
			<sentence id="1.1">BUG REPORT INFORMATION
=</sentence>
		</paragraph>
		<paragraph id="2">
			<sentence id="2.1">Since 1.8.0, using a full image identifier in the FROM command of a Dockerfile, makes docker build fail.</sentence>
		</paragraph>
		<paragraph id="3">
			<sentence id="3.1">docker version:
```
Client:
 Version: 1.8.1
 API version: 1.20
 Go version: go1.4.2
 Git commit: d12ea79
 Built: Thu Aug 13 02:35:49 UTC 2015
 OS/Arch: linux/amd64</sentence>
		</paragraph>
		<paragraph id="4">
			<sentence id="4.1">Server:</sentence>
			<sentence id="4.2"> Version: 1.8.1</sentence>
			<sentence id="4.3"> API version: 1.20</sentence>
			<sentence id="4.4"> Go version: go1.4.2</sentence>
			<sentence id="4.5"> Git commit: d12ea79</sentence>
			<sentence id="4.6"> Built: Thu Aug 13 02:35:49 UTC 2015</sentence>
			<sentence id="4.7"> OS/Arch: linux/amd64</sentence>
			<sentence id="4.8">```</sentence>
			<sentence id="4.9">docker info:</sentence>
			<sentence id="4.10">```</sentence>
			<sentence id="4.11">Containers: 0</sentence>
			<sentence id="4.12">Images: 21</sentence>
			<sentence id="4.13">Storage Driver: aufs</sentence>
			<sentence id="4.14"> Root Dir: /var/lib/docker/aufs</sentence>
			<sentence id="4.15"> Backing Filesystem: extfs</sentence>
			<sentence id="4.16"> Dirs: 21</sentence>
			<sentence id="4.17"> Dirperm1 Supported: false</sentence>
			<sentence id="4.18">Execution Driver: native-0.2</sentence>
			<sentence id="4.19">Logging Driver: json-file</sentence>
			<sentence id="4.20">Kernel Version: 3.13.0-55-generic</sentence>
			<sentence id="4.21">Operating System: Ubuntu 14.04.2 LTS</sentence>
			<sentence id="4.22">CPUs: 4</sentence>
			<sentence id="4.23">Total Memory: 7.681 GiB</sentence>
			<sentence id="4.24">Name: ubuntu-jsoriano</sentence>
			<sentence id="4.25">ID: W5PM:DW5X:RZ74:F2R3:563N:P76V:VSUL:KEP7:7LC4:GEVA:PPPA:PX3C</sentence>
			<sentence id="4.26">Username: jsoriano</sentence>
			<sentence id="4.27">Registry: https://index.docker.io/v1/</sentence>
			<sentence id="4.28">WARNING: No swap limit support</sentence>
			<sentence id="4.29">```</sentence>
			<sentence id="4.30">uname -a:</sentence>
			<sentence id="4.31">```</sentence>
			<sentence id="4.32">Linux jsoriano 3.13.0-55-generic #94-Ubuntu SMP Thu Jun 18 00:27:10 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux</sentence>
			<sentence id="4.33">```</sentence>
			<sentence id="4.34">Provide additional environment details (AWS, VirtualBox, physical, etc.):</sentence>
			<sentence id="4.35">It happens on any environment, tested on physical and virtual host.</sentence>
		</paragraph>
		<paragraph id="5">
			<sentence id="5.1">List the steps to reproduce the issue:</sentence>
			<sentence id="5.2">1 Create a Dockerfile with a FROM command with a 64-byte length image identifier</sentence>
			<sentence id="5.3">2 Run docker build .</sentence>
		</paragraph>
		<paragraph id="6">
			<sentence id="6.1">Describe the results you received:
```
unable to process Dockerfile: unable to parse repository info: Invalid repository name (a47f6f7784e2654c7100de492e044f5fa2469d03b35253e64326fa35539f5fb6), cannot specify 64-byte hexadecimal strings
```</sentence>
		</paragraph>
		<paragraph id="7">
			<sentence id="7.1">Describe the results you expected:
docker build working</sentence>
		</paragraph>
		<paragraph id="8">
			<sentence id="8.1">Provide additional info you think is important:
It started to fail on 1.8.0, it works if image identifier is truncated to less than 64-bytes length.</sentence>
		</paragraph>
		<paragraph id="9">
			<sentence id="9.1">Image ids are used by [packer dockerfile post-processor](https://github.com/jgkim/packer-post-processor-docker-dockerfile) to add metadata to custom images.</sentence>
		</paragraph>
	</description>
</bug>
