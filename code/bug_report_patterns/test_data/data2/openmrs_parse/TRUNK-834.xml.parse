<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bug>
    <id>TRUNK-834</id>
    <title>Found Similar People yields excessive results when adding a new person</title>
    <description>
        <paragraph id="1">
            <sentence id="1.1">When adding a new person, the search for similar people includes too many results.</sentence>
            <sentence id="1.2">The results for potentially duplicate patients should be refined.</sentence>
            <sentence id="1.3">For example, when adding a new patient, Fred Flintstone, it comes up with 229 results in our system, including many names which are not even remotely similar.</sentence>
            <sentence id="1.4">This also causes a significant delay while the list of potentially pre-existing persons is created.</sentence>
            <sentence id="1.5">When searching for existing patient, Fred Flintstone (like we were going to view them in the dashboard), it yields no persons.</sentence>
            <sentence id="1.6">This occurs in OpenMRS Version: 1.4.0.23 RC Build 7055.</sentence>
            <sentence id="1.7">See a sample of the results below...</sentence>
        </paragraph>
        <paragraph id="2">
            <sentence id="2.1">{code}116. 	FRED		RICHARD					</sentence>
            <sentence id="2.2">117. 	FRED		ROSALVO					</sentence>
            <sentence id="2.3">118. 	FRED		SAGET					</sentence>
            <sentence id="2.4">119. 	FRED		SERVILSAINT					</sentence>
            <sentence id="2.5">120. 	FRED		TOUSSAINT					</sentence>
            <sentence id="2.6">121. 	FRED		TOUSSAINT					</sentence>
            <sentence id="2.7">122. 	FRED		WILLY					</sentence>
            <sentence id="2.8">123. 	FREDA		AZOR					</sentence>
            <sentence id="2.9">124. 	FREDA		CHARLES					</sentence>
            <sentence id="2.10">125. 	FREDA		CHARLORIN					</sentence>
            <sentence id="2.11">126. 	FREDA		CHARLORIN					</sentence>
            <sentence id="2.12">127. 	FREDA		CHRISTIAN					</sentence>
            <sentence id="2.13">128. 	FREDA		CLERVIL					</sentence>
            <sentence id="2.14">129. 	FREDA		DORSAINVIL					</sentence>
            <sentence id="2.15">130. 	FREDA		DUBUISSON					</sentence>
            <sentence id="2.16">131. 	FREDA		ESTIVERNE					</sentence>
            <sentence id="2.17">132. 	FREDA		FLEREMIL					</sentence>
            <sentence id="2.18">133. 	FREDA		GELIN					</sentence>
            <sentence id="2.19">134. 	FREDA		GUSTINVIL					</sentence>
            <sentence id="2.20">135. 	FREDA		JEANTILUS					</sentence>
            <sentence id="2.21">136. 	FREDA		LOUIS					</sentence>
            <sentence id="2.22">137. 	FREDA		MESIDOR					</sentence>
            <sentence id="2.23">138. 	FREDA		MIOT					</sentence>
            <sentence id="2.24">139. 	FREDA		NORELUS					</sentence>
            <sentence id="2.25">140. 	FREDA		ORIOL					</sentence>
            <sentence id="2.26">141. 	FREDA		PIERRE					</sentence>
            <sentence id="2.27">142. 	FREDA		TI LUNDI					</sentence>
            <sentence id="2.28">143. 	FREDE		CORIOLAN					</sentence>
            <sentence id="2.29">144. 	FREDE		GESSE					</sentence>
            <sentence id="2.30">145. 	FREDE		PHILIPPE AUGUSTE					</sentence>
            <sentence id="2.31">146. 	FREDE		SOUVERAIN					</sentence>
            <sentence id="2.32">147. 	FREDET		FLEURMONT					</sentence>
            <sentence id="2.33">148. 	FREDET		MILVY					</sentence>
            <sentence id="2.34">149. 	FREDET		ONONDIEU					</sentence>
            <sentence id="2.35">150. 	FREDET		SENAT					</sentence>
            <sentence id="2.36">151. 	FREDET		VERTY					</sentence>
            <sentence id="2.37">152. 	FREDO		ALIX					</sentence>
            <sentence id="2.38">153. 	FREDO		ANJOUX					</sentence>
            <sentence id="2.39">154. 	FREDO		ANTOINE					</sentence>
            <sentence id="2.40">155. 	FREDO		BRUNEL					</sentence>
            <sentence id="2.41">156. 	FREDO		CANES					</sentence>
            <sentence id="2.42">157. 	FREDO		CANGE					</sentence>
            <sentence id="2.43">158. 	FREDO		DOSTERNE					</sentence>
            <sentence id="2.44">159. 	FREDO		ELOI					</sentence>
            <sentence id="2.45">160. 	FREDO		ELVEUS					</sentence>
            <sentence id="2.46">161. 	FREDO		EXAIS	23			06/15/1985	756500</sentence>
            <sentence id="2.47">162. 	FREDO		EXAUS	22			04/18/1986	337889</sentence>
            <sentence id="2.48">163. 	FREDO		EXAUS					</sentence>
            <sentence id="2.49">164. 	FREDO		GABRIEL					</sentence>
            <sentence id="2.50">165. 	FREDO		GILLES					</sentence>
            <sentence id="2.51">166. 	FREDO		INNOCENT					</sentence>
            <sentence id="2.52">167. 	FREDO		JOSEPH					</sentence>
            <sentence id="2.53">168. 	FREDO		JOSEPH					</sentence>
            <sentence id="2.54">169. 	FREDO		MASSENAT	22			06/15/1986	</sentence>
            <sentence id="2.55">170. 	FREDO		MICHAUD					</sentence>
            <sentence id="2.56">171. 	FREDO		MOREAU					</sentence>
            <sentence id="2.57">172. 	FREDO		PHILOCLES					</sentence>
            <sentence id="2.58">173. 	FREDO		VICTOR					</sentence>
            <sentence id="2.59">174. 	FREDOU		MADEUS					</sentence>
            <sentence id="2.60">175. 	FREED		BERNARD	23			11/09/1985	248766</sentence>
            <sentence id="2.61">176. 	FREROT		CEUS					</sentence>
            <sentence id="2.62">177. 	FREROT		CHARLES					</sentence>
            <sentence id="2.63">178. 	FREROT		CIRISMOND					</sentence>
            <sentence id="2.64">179. 	FREROT		DORCELY					</sentence>
            <sentence id="2.65">180. 	FREROT		DORVIL					</sentence>
            <sentence id="2.66">181. 	FREROT		LOUIDORT					</sentence>
            <sentence id="2.67">182. 	FREROT		PAUL					</sentence>
            <sentence id="2.68">183. 	FREROT		ULYSSE					</sentence>
            <sentence id="2.69">184. 	FRID		CONSERVE					</sentence>
            <sentence id="2.70">185. 	FRID		ELMILUS					</sentence>
            <sentence id="2.71">186. 	FRID		ERMILUS	21			06/16/1987	183536</sentence>
            <sentence id="2.72">187. 	FRID		JOSEPH					</sentence>
            <sentence id="2.73">188. 	FRIDA		BAZIN					</sentence>
            <sentence id="2.74">189. 	FRIDA		CLERGE					</sentence>
            <sentence id="2.75">190. 	FRIDA		DESULMA					</sentence>
            <sentence id="2.76">191. 	FRIDA		FRANCOIS					</sentence>
            <sentence id="2.77">192. 	FRIDA		LOUIS					</sentence>
            <sentence id="2.78">193. 	FRIDA		ORELUS					</sentence>
            <sentence id="2.79">194. 	FRIDA		PHILIPPE					</sentence>
            <sentence id="2.80">195. 	FRIDA		PIERRE LOUIS					</sentence>
            <sentence id="2.81">196. 	FRIDA		VERIS					</sentence>
            <sentence id="2.82">197. 	FRIDA		VICTOMA					</sentence>
            <sentence id="2.83">198. 	FRIDE		DAVILUS					</sentence>
            <sentence id="2.84">199. 	FRIDE		JOSEPH					</sentence>
            <sentence id="2.85">200. 	FRIDET		THOMAS					</sentence>
            <sentence id="2.86">201. 	FRIDO		GUILLAUME	21			05/09/1987	198420</sentence>
            <sentence id="2.87">202. 	FRIDO		SAINT VICTOR					</sentence>
            <sentence id="2.88">203. 	FRIDO		SAINTELUS					</sentence>
            <sentence id="2.89">204. 	FRIDO		SAJOUS					</sentence>
            <sentence id="2.90">205. 	FRITHO		GEDEON	21			09/28/1987	4122</sentence>
            <sentence id="2.91">206. 	FRITO		CHARLES					</sentence>
            <sentence id="2.92">207. 	FRITO		DESJARDIN					</sentence>
            <sentence id="2.93">208. 	FRITO		DUMERVIL					</sentence>
            <sentence id="2.94">209. 	FRITO		FERTIL					</sentence>
            <sentence id="2.95">210. 	FRITO		GUILLAUME					</sentence>
            <sentence id="2.96">211. 	FRITO		JACQUES					</sentence>
            <sentence id="2.97">212. 	FRITO		JEAN					</sentence>
            <sentence id="2.98">213. 	FRITO		JEAN BAPTISTE					</sentence>
            <sentence id="2.99">214. 	FRITO		JEAN BAPTISTE					</sentence>
            <sentence id="2.100">215. 	FRITO		LA FLEUR					</sentence>
            <sentence id="2.101">216. 	FRITO		LORGEAT					</sentence>
            <sentence id="2.102">217. 	FRITO		PIERRE					</sentence>
            <sentence id="2.103">218. 	FRITO		PIERRE					</sentence>
            <sentence id="2.104">219. 	FRITO		PYRHUS					</sentence>
            <sentence id="2.105">220. 	GUILLOUX	FAROT					</sentence>
            <sentence id="2.106">221. 	JASMIN		FAUBERT					</sentence>
            <sentence id="2.107">222. 	JOCELIN		FAUBERT					</sentence>
            <sentence id="2.108">223. 	KENNEST		FAUBERT					</sentence>
            <sentence id="2.109">224. 	MARTHE		FREDO					</sentence>
            <sentence id="2.110">225. 	MURIEL		FAUBERT					</sentence>
            <sentence id="2.111">226. 	R N		FORD					</sentence>
            <sentence id="2.112">227. 	RENEL		FREDE					</sentence>
            <sentence id="2.113">228. 	URSULA		FORDI					</sentence>
            <sentence id="2.114">229. 	WAGNER		FORD		</sentence>
            <sentence id="2.115">{code}</sentence>
        </paragraph>
        <paragraph id="3">
            <sentence id="3.1">On a side note (which may or may not be related), the total number of potential matches changes.</sentence>
            <sentence id="3.2">For example, as I advance through the previous and next pages, the top right where it gives the total number of results changes.</sentence>
            <sentence id="3.3">For example, on one page it says... Viewing 16-229 of 363 on another it says... Viewing 96-229 of 243 on another it says... Viewing 36-229 of 403.</sentence>
        </paragraph>
        <paragraph id="4">
            <sentence id="4.1">It also fails to go back to the previous list to show the first group of persons.</sentence>
        </paragraph>
        <paragraph id="5">
            <sentence id="5.1">Also, the group sizes are not uniform when advancing between groups of potentially duplicates.</sentence>
            <sentence id="5.2">Sometimes it's 5 persons in the list, other times it's 20 or 30 or 70, or 105.</sentence>
        </paragraph>
    </description>
</bug>
