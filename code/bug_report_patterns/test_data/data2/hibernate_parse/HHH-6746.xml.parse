<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bug>
    <id>HHH-6746</id>
    <title>ConcurrentModificationException in org.hibernate.connection.DriverManagerConnectionProvider.close()</title>
    <description>
        <paragraph id="1">
            <sentence id="1.1">A java.util.ConcurrentModificationException is thrown intermittently from DriverManagerConnectionProvider.close().</sentence>
            <sentence id="1.2">This is the stacktrace:</sentence>
        </paragraph>
        <paragraph id="2">
            <sentence id="2.1">{code}</sentence>
            <sentence id="2.2">java.util.ConcurrentModificationException</sentence>
            <sentence id="2.3">	at java.util.AbstractList$Itr.checkForComodification(AbstractList.java:372)</sentence>
            <sentence id="2.4">	at java.util.AbstractList$Itr.next(AbstractList.java:343)</sentence>
            <sentence id="2.5">	at org.hibernate.connection.DriverManagerConnectionProvider.close(DriverManagerConnectionProvider.java:175)</sentence>
            <sentence id="2.6">	at org.hibernate.impl.SessionFactoryImpl.close(SessionFactoryImpl.java:965)</sentence>
            <sentence id="2.7">        at [my code]</sentence>
            <sentence id="2.8">{code}</sentence>
        </paragraph>
        <paragraph id="3">
            <sentence id="3.1">All the other methods in that class synchronize their access to the pool ArrayList, but close() does not (even though it iterates over the list).</sentence>
        </paragraph>
    </description>
</bug>
