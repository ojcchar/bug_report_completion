<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bug>
    <id>HHH-1866</id>
    <title>NullPointerException in org.hibernate.util.ComparableComparator</title>
    <description>
        <paragraph id="1">
            <sentence id="1.1">I think that org.hibernate.util.ComparableComparator or OptimisticTreeCache.DataVersionAdapter  has a bug.</sentence>
        </paragraph>
        <paragraph id="2">
            <sentence id="2.1">"return ((Comparable) x).compareTo(y);" throws a NullPointerException if x is a null pointer.</sentence>
        </paragraph>
        <paragraph id="3">
            <sentence id="3.1">org.hibernate.util.ComparableComparator.</sentence>
            <sentence id="3.2">compare(.</sentence>
            <sentence id="3.3">.)</sentence>
            <sentence id="3.4">is called from OptimisticTreeCache.DataVersionAdapter in line "return versionComparator.compare( previousVersion, other ) &gt; 1;".</sentence>
        </paragraph>
        <paragraph id="4">
            <sentence id="4.1">We get this NullPointerExption if we use Hibernate with org.hibernate.cache.OptimisticTreeCacheProvider which causes an org.springframework.transaction.UnexpectedRollbackException.</sentence>
        </paragraph>
        <paragraph id="5">
            <sentence id="5.1">Greetings from Germany!</sentence>
        </paragraph>
    </description>
</bug>
