<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bug>
    <id>14760</id>
    <title>Incorrect out of disk space report</title>
    <description>
        <paragraph id="1">
            <sentence id="1.1">Building an image with 'sudo docker build --name test -t giantmonkey/test .'it failed with 'No space left on device' once while installing a package.</sentence>
            <sentence id="1.2">Of course I checked that enough space is available.</sentence>
            <sentence id="1.3">Deleting the intermediate containers and images and executing the exact same command again, the image is built successfully.</sentence>
        </paragraph>
        <paragraph id="2">
            <sentence id="2.1">"'</sentence>
            <sentence id="2.2">[â€¦]</sentence>
            <sentence id="2.3">Preparing to unpack .../libgmp-dev_2%3a6.0.0+dfsg-6_amd64.</sentence>
            <sentence id="2.4">deb ...</sentence>
            <sentence id="2.5">Unpacking libgmp-dev:amd64 (2:6.0.0+dfsg-6) ...</sentence>
            <sentence id="2.6">Selecting previously unselected package libstdc++-4.8-dev:amd64.</sentence>
            <sentence id="2.7">Preparing to unpack .../libstdc++-4.8-dev_4.8.4-1_amd64.deb ...</sentence>
            <sentence id="2.8">Unpacking libstdc++-4.8-dev:amd64 (4.8.4-1) ...</sentence>
            <sentence id="2.9">dpkg: error processing archive /var/cache/apt/archives/libstdc++-4.8-dev_4.8.4-1_amd64.deb (--unpack):</sentence>
            <sentence id="2.10">unable to install new version of '/usr/include/c++/4.8/ext/pb_ds/detail/left_child_next_sibling_heap_/policy_access_fn_imps.</sentence>
            <sentence id="2.11">hpp': No space left on device</sentence>
            <sentence id="2.12">Selecting previously unselected package manpages-dev.</sentence>
            <sentence id="2.13">Preparing to unpack .../manpages-dev_3.74-1_all.deb ...</sentence>
            <sentence id="2.14">Unpacking manpages-dev (3.74-1) ...</sentence>
            <sentence id="2.15">Selecting previously unselected package rsync.</sentence>
            <sentence id="2.16">Preparing to unpack .../rsync_3.1.1-3_amd64.deb ...</sentence>
            <sentence id="2.17">Unpacking rsync (3.1.1-3) ...</sentence>
            <sentence id="2.18">Selecting previously unselected package ruby2.1-dev:amd64.</sentence>
            <sentence id="2.19">Preparing to unpack .../ruby2.1-dev_2.1.5-2+deb8u1_amd64.</sentence>
            <sentence id="2.20">deb ...</sentence>
            <sentence id="2.21">Unpacking ruby2.1-dev:amd64 (2.1.5-2+deb8u1) ...</sentence>
            <sentence id="2.22">Selecting previously unselected package ruby-dev.</sentence>
            <sentence id="2.23">Preparing to unpack .../ruby-dev_1%3a2.1.5+deb8u1_all.</sentence>
            <sentence id="2.24">deb ...</sentence>
            <sentence id="2.25">Unpacking ruby-dev (1:2.1.5+deb8u1) ...</sentence>
            <sentence id="2.26">Selecting previously unselected package sudo.</sentence>
            <sentence id="2.27">Preparing to unpack .../sudo_1.8.10p3-1+deb8u2_amd64.</sentence>
            <sentence id="2.28">deb ...</sentence>
            <sentence id="2.29">Unpacking sudo (1.8.10p3-1+deb8u2) ...</sentence>
            <sentence id="2.30">Selecting previously unselected package xauth.</sentence>
            <sentence id="2.31">Preparing to unpack .../xauth_1%3a1.0.9-1_amd64.deb ...</sentence>
            <sentence id="2.32">Unpacking xauth (1:1.0.9-1) ...</sentence>
            <sentence id="2.33">Processing triggers for man-db (2.7.0.2-5) ...</sentence>
            <sentence id="2.34">Processing triggers for systemd (215-17+deb8u1) ...</sentence>
            <sentence id="2.35">Errors were encountered while processing:</sentence>
            <sentence id="2.36">/var/cache/apt/archives/libstdc++-4.8-dev_4.8.4-1_amd64.deb</sentence>
            <sentence id="2.37">E: Sub-process /usr/bin/dpkg returned an error code (1)</sentence>
            <sentence id="2.38">"'</sentence>
            <sentence id="2.39">- Docker version</sentence>
        </paragraph>
        <paragraph id="3">
            <sentence id="3.1">"'</sentence>
            <sentence id="3.2">$ sudo docker version</sentence>
            <sentence id="3.3">Client version: 1.6.2</sentence>
            <sentence id="3.4">Client API version: 1.18</sentence>
            <sentence id="3.5">Go version (client): go1.3.3</sentence>
            <sentence id="3.6">Git commit (client): 7c8fca2</sentence>
            <sentence id="3.7">OS/Arch (client): linux/amd64</sentence>
            <sentence id="3.8">Server version: 1.6.2</sentence>
            <sentence id="3.9">Server API version: 1.18</sentence>
            <sentence id="3.10">Go version (server): go1.3.3</sentence>
            <sentence id="3.11">Git commit (server): 7c8fca2</sentence>
            <sentence id="3.12">OS/Arch (server): linux/amd64</sentence>
            <sentence id="3.13">"'</sentence>
            <sentence id="3.14">- Docker info</sentence>
        </paragraph>
        <paragraph id="4">
            <sentence id="4.1">"'</sentence>
            <sentence id="4.2">$ sudo docker -D info</sentence>
            <sentence id="4.3">Containers: 4</sentence>
            <sentence id="4.4">Images: 64</sentence>
            <sentence id="4.5">Storage Driver: btrfs</sentence>
            <sentence id="4.6">Build Version: Btrfs v3.17</sentence>
            <sentence id="4.7">Library Version: 101</sentence>
            <sentence id="4.8">Execution Driver: native-0.2</sentence>
            <sentence id="4.9">Kernel Version: 3.16.0-4-amd64</sentence>
            <sentence id="4.10">Operating System: Debian GNU/Linux 8 (jessie)</sentence>
            <sentence id="4.11">CPUs: 8</sentence>
            <sentence id="4.12">Total Memory: 31.43 GiB</sentence>
            <sentence id="4.13">Name: myhostname</sentence>
            <sentence id="4.14">ID: FT46:J2F2:OOT7:GRZV:6C5E:3D7X:WN47:BAMH:CDC7:YDUD:6MIA:5WWN</sentence>
            <sentence id="4.15">Debug mode (server): false</sentence>
            <sentence id="4.16">Debug mode (client): true</sentence>
            <sentence id="4.17">Fds: 22</sentence>
            <sentence id="4.18">Goroutines: 42</sentence>
            <sentence id="4.19">System Time: Mon Jul 20 18:10:26 CEST 2015</sentence>
            <sentence id="4.20">EventsListeners: 0</sentence>
            <sentence id="4.21">Init SHA1: 0a6ed07baf5b8c273f2a2c75a573e880af8a24b3</sentence>
            <sentence id="4.22">Init Path: /usr/lib/docker.</sentence>
            <sentence id="4.23">io/dockerinit</sentence>
            <sentence id="4.24">Docker Root Dir: /var/lib/docker</sentence>
            <sentence id="4.25">WARNING: No memory limit support</sentence>
            <sentence id="4.26">WARNING: No swap limit support</sentence>
            <sentence id="4.27">"'</sentence>
            <sentence id="4.28">- Linux version</sentence>
        </paragraph>
        <paragraph id="5">
            <sentence id="5.1">"'
$ uname -a
Linux myhostname 3.16.0-4-amd64 #1 SMP Debian 3.16.7-ckt11-1 (2015-05-24) x86_64 GNU/Linux
"'</sentence>
        </paragraph>
        <paragraph id="6">
            <sentence id="6.1">How reproducible: I only experienced this issue once.</sentence>
        </paragraph>
    </description>
</bug>
