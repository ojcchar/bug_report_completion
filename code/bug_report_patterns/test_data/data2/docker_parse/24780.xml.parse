<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bug>
    <id>24780</id>
    <title>Service can't reach it's own vip/dns name</title>
    <description>
        <paragraph id="1">
            <sentence id="1.1">Single node:</sentence>
        </paragraph>
        <paragraph id="2">
            <sentence id="2.1">"'
docker network create mynet -d overlay
docker service create --name foo --network mynet --replicas 3 busybox nc -ll -p 1234 -e hostname
docker service create --name bar --network mynet --replicas 1 busybox top
"'</sentence>
        </paragraph>
        <paragraph id="3">
            <sentence id="3.1">Accessing service 'foo' from other service works all the time:</sentence>
        </paragraph>
        <paragraph id="4">
            <sentence id="4.1">"'
docker exec $(docker ps | grep bar.1 | awk '{print $1}') nc foo:1234
"'</sentence>
        </paragraph>
        <paragraph id="5">
            <sentence id="5.1">Accessing from 'foo' itself only works when vip resolves to current container, 1/3 cases for this example:</sentence>
        </paragraph>
        <paragraph id="6">
            <sentence id="6.1">"'
docker exec $(docker ps | grep foo.1 | awk '{print $1}') nc foo:1234
"'</sentence>
        </paragraph>
        <paragraph id="7">
            <sentence id="7.1">@aboch @mavenugo</sentence>
        </paragraph>
    </description>
</bug>
