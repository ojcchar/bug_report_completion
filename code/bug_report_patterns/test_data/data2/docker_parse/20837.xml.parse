<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bug>
    <id>20837</id>
    <title>Unable to run docker and mininet on the same host (Ubuntu 15.10)</title>
    <description>
        <paragraph id="1">
            <sentence id="1.1">&lt;!</sentence>
            <sentence id="1.2">--
If you are reporting a new issue, make sure that we do not have any duplicates
already open.</sentence>
            <sentence id="1.3">You can ensure this by searching the issue list for this
repository.</sentence>
            <sentence id="1.4">If there is a duplicate, please close your issue and add a comment
to the existing issue instead.</sentence>
        </paragraph>
        <paragraph id="2">
            <sentence id="2.1">If you suspect your issue is a bug, please edit your issue description to
include the BUG REPORT INFORMATION shown below.</sentence>
            <sentence id="2.2">If you fail to provide this
information within 7 days, we cannot debug your issue and will close it.</sentence>
            <sentence id="2.3">We
will, however, reopen it if you later provide the information.</sentence>
        </paragraph>
        <paragraph id="3">
            <sentence id="3.1">For more information about reporting issues, see
https://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues</sentence>
        </paragraph>
        <paragraph id="4">
            <sentence id="4.1">---------------------------------------------------</sentence>
            <sentence id="4.2">BUG REPORT INFORMATION</sentence>
            <sentence id="4.3">---------------------------------------------------</sentence>
            <sentence id="4.4">Use the commands below to provide key information from your environment:</sentence>
            <sentence id="4.5">You do NOT have to include this information if this is a FEATURE REQUEST</sentence>
            <sentence id="4.6">--&gt;</sentence>
        </paragraph>
        <paragraph id="5">
            <sentence id="5.1">Output of 'docker version':</sentence>
        </paragraph>
        <paragraph id="6">
            <sentence id="6.1">"'
Client:
 Version: 1.10.2
 API version: 1.22
 Go version: go1.5.3
 Git commit: c3959b1
 Built: Mon Feb 22 21:40:35 2016
 OS/Arch: linux/amd64</sentence>
        </paragraph>
        <paragraph id="7">
            <sentence id="7.1">Server:
 Version: 1.10.2
 API version: 1.22
 Go version: go1.5.3
 Git commit: c3959b1
 Built: Mon Feb 22 21:40:35 2016
 OS/Arch: linux/amd64
"'</sentence>
        </paragraph>
        <paragraph id="8">
            <sentence id="8.1">Output of 'docker info':</sentence>
        </paragraph>
        <paragraph id="9">
            <sentence id="9.1">"'
Containers: 0
 Running: 0
 Paused: 0
 Stopped: 0
Images: 1
Server Version: 1.10.2
Storage Driver: aufs
 Root Dir: /var/lib/docker/aufs
 Backing Filesystem: extfs
 Dirs: 6
 Dirperm1 Supported: true
Execution Driver: native-0.2
Logging Driver: json-file
Plugins: 
 Volume: local
 Network: host bridge null
Kernel Version: 4.2.0-30-generic
Operating System: Ubuntu 15.10
OSType: linux
Architecture: x86_64
CPUs: 4
Total Memory: 7.796 GiB
Name: jurek
ID: XXOF:V2MT:YDVJ:VGUT:EH5T:KLPX:H2AO:QPPV:AJVX:7JTP:S4KU:FEAA
WARNING: No swap limit support
"'</sentence>
        </paragraph>
        <paragraph id="10">
            <sentence id="10.1">Provide additional environment details (AWS, VirtualBox, physical, etc.):</sentence>
        </paragraph>
        <paragraph id="11">
            <sentence id="11.1">I'm running on a physical machine with the official mininet package (all installed packages are up to date.)</sentence>
        </paragraph>
        <paragraph id="12">
            <sentence id="12.1">"'
$ lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description: Ubuntu 15.10
Release: 15.10
Codename: wily
"'</sentence>
        </paragraph>
        <paragraph id="13">
            <sentence id="13.1">"'
$ uname -a
Linux jurek 4.2.0-30-generic #36-Ubuntu SMP Fri Feb 26 00:58:07 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux
"'</sentence>
        </paragraph>
        <paragraph id="14">
            <sentence id="14.1">"'
$ dpkg -l | grep mininet
ii mininet 2.2.1-1 amd64 process-based network emulator
"'</sentence>
        </paragraph>
        <paragraph id="15">
            <sentence id="15.1">List the steps to reproduce the issue:</sentence>
            <sentence id="15.2">1 Run a simple mininet simulation:</sentence>
        </paragraph>
        <paragraph id="16">
            <sentence id="16.1">"'</sentence>
            <sentence id="16.2">$ sudo mn</sentence>
            <sentence id="16.3">*** No default OpenFlow controller found for default switch!</sentence>
            <sentence id="16.4">*** Falling back to OVS Bridge</sentence>
            <sentence id="16.5">*** Creating network</sentence>
            <sentence id="16.6">*** Adding controller</sentence>
            <sentence id="16.7">*** Adding hosts:</sentence>
            <sentence id="16.8">h1 h2 nohup.out Adding switches:</sentence>
            <sentence id="16.9">s1 nohup.out Adding links:</sentence>
            <sentence id="16.10">(h1, s1) (h2, s1) nohup.out Configuring hosts</sentence>
            <sentence id="16.11">h1 h2 nohup.out Starting controller</sentence>
        </paragraph>
        <paragraph id="17">
            <sentence id="17.1">*** Starting 1 switches</sentence>
            <sentence id="17.2">s1 ...</sentence>
            <sentence id="17.3">*** Starting CLI:</sentence>
            <sentence id="17.4">mininet&gt; exit</sentence>
            <sentence id="17.5">*** Stopping 0 controllers</sentence>
        </paragraph>
        <paragraph id="18">
            <sentence id="18.1">*** Stopping 2 links</sentence>
            <sentence id="18.2">.</sentence>
            <sentence id="18.3">.</sentence>
            <sentence id="18.4">*** Stopping 1 switches</sentence>
            <sentence id="18.5">s1 nohup.out Stopping 2 hosts</sentence>
            <sentence id="18.6">h1 h2 nohup.out Done</sentence>
            <sentence id="18.7">completed in 1.593 seconds</sentence>
            <sentence id="18.8">"'</sentence>
        </paragraph>
        <paragraph id="19">
            <sentence id="19.1">Describe the results you received:</sentence>
        </paragraph>
        <paragraph id="20">
            <sentence id="20.1">Now, docker commands always fail:</sentence>
        </paragraph>
        <paragraph id="21">
            <sentence id="21.1">"'
$ sudo docker run hello-world
docker: Error response from daemon: Container command not found or does not exist..
"'</sentence>
        </paragraph>
        <paragraph id="22">
            <sentence id="22.1">When I run 'docker info', the output includes more WARNINGS:</sentence>
        </paragraph>
        <paragraph id="23">
            <sentence id="23.1">"'</sentence>
            <sentence id="23.2">Containers: 0</sentence>
            <sentence id="23.3"> Running: 0</sentence>
            <sentence id="23.4"> Paused: 0</sentence>
            <sentence id="23.5"> Stopped: 0</sentence>
            <sentence id="23.6">Images: 1</sentence>
            <sentence id="23.7">Server Version: 1.10.2</sentence>
            <sentence id="23.8">Storage Driver: aufs</sentence>
            <sentence id="23.9"> Root Dir: /var/lib/docker/aufs</sentence>
            <sentence id="23.10"> Backing Filesystem: extfs</sentence>
            <sentence id="23.11"> Dirs: 6</sentence>
            <sentence id="23.12"> Dirperm1 Supported: true</sentence>
            <sentence id="23.13">Execution Driver: native-0.2</sentence>
            <sentence id="23.14">Logging Driver: json-file</sentence>
            <sentence id="23.15">Plugins: </sentence>
            <sentence id="23.16"> Volume: local</sentence>
            <sentence id="23.17"> Network: bridge null host</sentence>
            <sentence id="23.18">Kernel Version: 4.2.0-30-generic</sentence>
            <sentence id="23.19">Operating System: Ubuntu 15.10</sentence>
            <sentence id="23.20">OSType: linux</sentence>
            <sentence id="23.21">Architecture: x86_64</sentence>
            <sentence id="23.22">CPUs: 4</sentence>
            <sentence id="23.23">Total Memory: 7.796 GiB</sentence>
            <sentence id="23.24">Name: jurek</sentence>
            <sentence id="23.25">ID: XXOF:V2MT:YDVJ:VGUT:EH5T:KLPX:H2AO:QPPV:AJVX:7JTP:S4KU:FEAA</sentence>
            <sentence id="23.26">WARNING: No swap limit support</sentence>
            <sentence id="23.27">WARNING: No oom kill disable support</sentence>
            <sentence id="23.28">WARNING: No cpu cfs quota support</sentence>
            <sentence id="23.29">WARNING: No cpu cfs period support</sentence>
            <sentence id="23.30">WARNING: No cpu shares support</sentence>
            <sentence id="23.31">WARNING: No cpuset support</sentence>
            <sentence id="23.32">"'</sentence>
        </paragraph>
        <paragraph id="24">
            <sentence id="24.1">Describe the results you expected:</sentence>
        </paragraph>
        <paragraph id="25">
            <sentence id="25.1">Expected the same original output from 'docker info'.</sentence>
        </paragraph>
        <paragraph id="26">
            <sentence id="26.1">Provide additional info you think is important:</sentence>
        </paragraph>
        <paragraph id="27">
            <sentence id="27.1">Running 'mn -c' to clean up mininet has no effect.</sentence>
        </paragraph>
        <paragraph id="28">
            <sentence id="28.1">The output from running 'docker daemon' by hand after a system boot shows similar info:</sentence>
        </paragraph>
        <paragraph id="29">
            <sentence id="29.1">"'
$ sudo systemctl stop docker
$ sudo /usr/bin/docker daemon 
INFO[0000] [graphdriver] using prior storage driver "aufs" 
INFO[0000] Graph migration to content-addressability took 0.00 seconds 
INFO[0000] Firewalld running: false 
INFO[0000] Default bridge (docker0) is assigned with an IP address 172.17.0.0/16. Daemon option --bip can be used to set a preferred IP address 
WARN[0000] Your kernel does not support swap memory limit. 
INFO[0000] Loading containers: start. </sentence>
        </paragraph>
        <paragraph id="30">
            <sentence id="30.1">INFO[0000] Loading containers: done.</sentence>
            <sentence id="30.2">INFO[0000] Daemon has completed initialization 
INFO[0000] Docker daemon commit=c3959b1 execdriver=native-0.2 graphdriver=aufs version=1.10.2
"'</sentence>
        </paragraph>
        <paragraph id="31">
            <sentence id="31.1">Stop the daemon and run the simple 'mn' simulation.</sentence>
            <sentence id="31.2">Trying to start the daemon again gives:</sentence>
        </paragraph>
        <paragraph id="32">
            <sentence id="32.1">"'</sentence>
            <sentence id="32.2">$ sudo /usr/bin/docker daemon </sentence>
            <sentence id="32.3">INFO[0000] [graphdriver] using prior storage driver "aufs" </sentence>
            <sentence id="32.4">INFO[0000] Graph migration to content-addressability took 0.00 seconds </sentence>
            <sentence id="32.5">INFO[0000] Firewalld running: false </sentence>
            <sentence id="32.6">INFO[0000] Default bridge (docker0) is assigned with an IP address 172.17.0.0/16. Daemon option --bip can be used to set a preferred IP address </sentence>
            <sentence id="32.7">WARN[0000] Your kernel does not support swap memory limit. </sentence>
            <sentence id="32.8">WARN[0000] Your kernel does not support memory reservation. </sentence>
            <sentence id="32.9">WARN[0000] Your kernel does not support oom control. </sentence>
            <sentence id="32.10">WARN[0000] Your kernel does not support memory swappiness. </sentence>
            <sentence id="32.11">WARN[0000] Your kernel does not support kernel memory limit. </sentence>
            <sentence id="32.12">WARN[0000] Your kernel does not support cgroup cpu shares </sentence>
            <sentence id="32.13">WARN[0000] Your kernel does not support cgroup cfs period </sentence>
            <sentence id="32.14">WARN[0000] Your kernel does not support cgroup cfs quotas </sentence>
            <sentence id="32.15">WARN[0000] Your kernel does not support cgroup blkio weight </sentence>
            <sentence id="32.16">WARN[0000] Your kernel does not support cgroup blkio weight_device </sentence>
            <sentence id="32.17">WARN[0000] Your kernel does not support cgroup blkio throttle.read_bps_device </sentence>
            <sentence id="32.18">WARN[0000] Your kernel does not support cgroup blkio throttle.write_bps_device </sentence>
            <sentence id="32.19">WARN[0000] Your kernel does not support cgroup blkio throttle.read_iops_device </sentence>
            <sentence id="32.20">WARN[0000] Your kernel does not support cgroup blkio throttle.write_iops_device </sentence>
            <sentence id="32.21">INFO[0000] Loading containers: start. </sentence>
        </paragraph>
        <paragraph id="33">
            <sentence id="33.1">INFO[0000] Loading containers: done.</sentence>
            <sentence id="33.2">INFO[0000] Daemon has completed initialization 
INFO[0000] Docker daemon commit=c3959b1 execdriver=native-0.2 graphdriver=aufs version=1.10.2
INFO[0000] API listen on /var/run/docker.</sentence>
            <sentence id="33.3">sock 
"'</sentence>
        </paragraph>
    </description>
</bug>
