<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bug>
    <id>2074</id>
    <title>fb:js-string s declaration timing changed</title>
    <description>
        <paragraph id="1">
            <sentence id="1.1">I have some code that looks like:</sentence>
        </paragraph>
        <paragraph id="2">
            <sentence id="2.1">&lt;fb:js-string var= foo &gt;...&lt;/fb:js-string&gt;</sentence>
        </paragraph>
        <paragraph id="3">
            <sentence id="3.1">&lt;script&gt;&lt;!</sentence>
            <sentence id="3.2">--</sentence>
            <sentence id="3.3">...code that uses foo...</sentence>
            <sentence id="3.4">--&gt;&lt;/script&gt;</sentence>
        </paragraph>
        <paragraph id="4">
            <sentence id="4.1">Before today s (5/1) push_ this worked fine but after the push my script yields a  foo is undefined  error.</sentence>
        </paragraph>
        <paragraph id="5">
            <sentence id="5.1">If I change my script to:</sentence>
        </paragraph>
        <paragraph id="6">
            <sentence id="6.1">&lt;script&gt;&lt;!</sentence>
            <sentence id="6.2">--</sentence>
            <sentence id="6.3">setTimeout(function() { ...code that uses foo... }_ 1);</sentence>
            <sentence id="6.4">--&gt;&lt;/script&gt;</sentence>
        </paragraph>
        <paragraph id="7">
            <sentence id="7.1">everything works.</sentence>
            <sentence id="7.2">This implies that the timing for the fb:js-string s being declared was changed in the 5/1 push.</sentence>
        </paragraph>
        <paragraph id="8">
            <sentence id="8.1">It s unclear whether this change is intentional or not_ but it does break existing code.</sentence>
        </paragraph>
    </description>
</bug>
