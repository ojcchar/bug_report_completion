<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bug>
    <id>44433</id>
    <title>Apache reports it is stopped before all child processes have stopped</title>
    <description>
        <paragraph id="1">
            <sentence id="1.1">Apache should not report that it has stopped if not all the child processes have
stopped.</sentence>
            <sentence id="1.2">The effect of this is restart and graceful restart are completely
useless (especially in automated scripts) because it attempts to start and
thinks it is still running so does not start at all.</sentence>
            <sentence id="1.3">Further documentation of
this bug can be found at:</sentence>
        </paragraph>
        <paragraph id="2">
            <sentence id="2.1">http://bugs.gentoo.org/show_bug.cgi?id=110556</sentence>
        </paragraph>
        <paragraph id="3">
            <sentence id="3.1">emerge -pv www-servers/apache:</sentence>
        </paragraph>
        <paragraph id="4">
            <sentence id="4.1">[ebuild   R   ] www-servers/apache-2.2.8  USE="ldap ssl suexec threads -debug</sentence>
            <sentence id="4.2">-doc (-selinux) -sni -static" APACHE2_MODULES="actions alias auth_basic</sentence>
            <sentence id="4.3">auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm</sentence>
            <sentence id="4.4">authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache</sentence>
            <sentence id="4.5">dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter</sentence>
            <sentence id="4.6">file_cache filter headers ident imagemap include info log_config logio</sentence>
            <sentence id="4.7">mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer</sentence>
            <sentence id="4.8">proxy_connect proxy_http rewrite setenvif speling status unique_id userdir</sentence>
            <sentence id="4.9">usertrack vhost_alias -asis -authn_alias -cern_meta -charset_lite -dumpio</sentence>
            <sentence id="4.10">-log_forensic -proxy_ftp -version" APACHE2_MPMS="-event -itk -peruser -prefork</sentence>
            <sentence id="4.11">-worker" 0 kB</sentence>
        </paragraph>
        <paragraph id="5">
            <sentence id="5.1">emerge --info:</sentence>
        </paragraph>
        <paragraph id="6">
            <sentence id="6.1">Portage 2.1.4.4 (default-linux/x86/2007.0, gcc-4.1.2, glibc-2.6.1-r0,</sentence>
            <sentence id="6.2">2 6.24-gentoo-r2 i686)</sentence>
            <sentence id="6.3">=================================================================</sentence>
            <sentence id="6.4">System uname: 2.6.24-gentoo-r2 i686 Genuine Intel(R) CPU T2300 @ 1.66GHz</sentence>
            <sentence id="6.5">Timestamp of tree: Fri, 15 Feb 2008 14:16:01 +0000</sentence>
            <sentence id="6.6">ccache version 2.4 [disabled]</sentence>
            <sentence id="6.7">app-shells/bash:     3.2_p17-r1</sentence>
            <sentence id="6.8">dev-java/java-config: 1.3.7, 2.1.4</sentence>
            <sentence id="6.9">dev-lang/python:     2.4.4-r6</sentence>
            <sentence id="6.10">dev-python/pycrypto: 2.0.1-r6</sentence>
            <sentence id="6.11">dev-util/ccache:     2.4-r7</sentence>
            <sentence id="6.12">sys-apps/baselayout: 1.12.10-r5</sentence>
            <sentence id="6.13">sys-apps/sandbox:    1.2.18.1-r2</sentence>
            <sentence id="6.14">sys-devel/autoconf:  2.13, 2.61-r1</sentence>
            <sentence id="6.15">sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10</sentence>
            <sentence id="6.16">sys-devel/binutils:  2.18-r1</sentence>
            <sentence id="6.17">sys-devel/gcc-config: 1.4.0-r4</sentence>
            <sentence id="6.18">sys-devel/libtool:   1.5.24</sentence>
            <sentence id="6.19">virtual/os-headers:  2.6.23-r3</sentence>
            <sentence id="6.20">ACCEPT_KEYWORDS="x86"</sentence>
            <sentence id="6.21">CBUILD="i686-pc-linux-gnu"</sentence>
            <sentence id="6.22">CFLAGS="-march=prescott -O2 -pipe -fomit-frame-pointer"</sentence>
            <sentence id="6.23">CHOST="i686-pc-linux-gnu"</sentence>
            <sentence id="6.24">CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config</sentence>
            <sentence id="6.25">/usr/kde/3.5/shutdown /usr/share/config"</sentence>
            <sentence id="6.26">CONFIG_PROTECT_MASK="/etc/env.</sentence>
            <sentence id="6.27">d /etc/env.</sentence>
            <sentence id="6.28">d/java/ /etc/fonts/fonts.</sentence>
            <sentence id="6.29">conf</sentence>
            <sentence id="6.30">/etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/</sentence>
            <sentence id="6.31">/etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo</sentence>
            <sentence id="6.32">/etc/udev/rules.</sentence>
            <sentence id="6.33">d"</sentence>
            <sentence id="6.34">CXXFLAGS="-march=prescott -O2 -pipe -fomit-frame-pointer"</sentence>
            <sentence id="6.35">DISTDIR="/usr/portage/distfiles"</sentence>
            <sentence id="6.36">FEATURES="distlocks metadata-transfer parallel-fetch sandbox sfperms strict</sentence>
            <sentence id="6.37">unmerge-orphans userfetch"</sentence>
            <sentence id="6.38">GENTOO_MIRRORS="http://portage.home http://prometheus.cs.wmich.edu/gentoo</sentence>
            <sentence id="6.39">http://mirror.phy.olemiss.edu/mirror/gentoo</sentence>
            <sentence id="6.40">http://gentoo.cites.uiuc.edu/pub/gentoo/</sentence>
            <sentence id="6.41">http://mirror.utdlug.org/linux/distributions/gentoo/ "</sentence>
            <sentence id="6.42">LANG="en_US.</sentence>
            <sentence id="6.43">UTF-8"</sentence>
            <sentence id="6.44">LC_ALL="en_US.</sentence>
            <sentence id="6.45">UTF-8"</sentence>
            <sentence id="6.46">LINGUAS="en ru"</sentence>
            <sentence id="6.47">MAKEOPTS="-j6"</sentence>
            <sentence id="6.48">PKGDIR="/usr/portage/packages"</sentence>
            <sentence id="6.49">PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress</sentence>
            <sentence id="6.50">--force --whole-file --delete --stats --timeout=180 --exclude=/distfiles</sentence>
            <sentence id="6.51">--exclude=/local --exclude=/packages"</sentence>
            <sentence id="6.52">PORTAGE_TMPDIR="/var/tmp/portage"</sentence>
            <sentence id="6.53">PORTDIR="/usr/portage"</sentence>
            <sentence id="6.54">PORTDIR_OVERLAY="/usr/portage/local/layman/sajinet /usr/local/portage"</sentence>
            <sentence id="6.55">SYNC="rsync://rsync.namerica.gentoo.org/gentoo-portage"</sentence>
            <sentence id="6.56">USE="X a52 aac acl acpi adns alsa apache2 audiofile avi bcmath bdf berkdb</sentence>
            <sentence id="6.57">bitmap-fonts bzip2 calendar caps cddb cdparanoia cdr cjk clamav cli</sentence>
            <sentence id="6.58">cpudetection cracklib crypt ctype cups curl curlwrappers dbus directfb dri dts</sentence>
            <sentence id="6.59">dvb dvd dvdnav dvdread encode exif fbcon ffmpeg flac foomaticdb fortran ftp gd</sentence>
            <sentence id="6.60">gdbm gif glib gmp gnutls gpm gtk gtk2 hal hash iconv imagemagick imap imlib</sentence>
            <sentence id="6.61">innodb ipv6 isdnlog java javascript jpeg jpeg2k json kde kson lcms ldap</sentence>
            <sentence id="6.62">ldap-sasl live logrotate lzo mad matroska mcal mhash midi mime mjpeg mmap mmx</sentence>
            <sentence id="6.63">mmxext mng mp2 mp3 mp4 mpeg msession msn mssql mudflap mysql mysqli ncurses</sentence>
            <sentence id="6.64">network nls nptl nptlonly nsplugin nss nvidia offensive ogg openal opengl</sentence>
            <sentence id="6.65">openmp osc oss pam pch pcntl pcre pdf pdo perl php png posix ppds pppd python</sentence>
            <sentence id="6.66">qt3 qt3support qt4 quicktime readline reflection rtc samba sasl sdl seamonkey</sentence>
            <sentence id="6.67">session simplexml snmp soap sockets spell spl sqlite sse ssl subversion suexec</sentence>
            <sentence id="6.68">svg tcpd theora threads tidy tiff tokenizer transcode truetype truetype-fonts</sentence>
            <sentence id="6.69">type1-fonts unicode usb v4l v4l2 vcd vorbis wddx win32codecs wxwindows x264 x86</sentence>
            <sentence id="6.70">xforms xine xml xorg xpm xv xvid zip zlib" ALSA_CARDS="hda-intel"</sentence>
            <sentence id="6.71">ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file</sentence>
            <sentence id="6.72">hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route</sentence>
            <sentence id="6.73">share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest</sentence>
            <sentence id="6.74">authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default</sentence>
            <sentence id="6.75">authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs</sentence>
            <sentence id="6.76">dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter</sentence>
            <sentence id="6.77">headers ident imagemap include info log_config logio mem_cache mime mime_magic</sentence>
            <sentence id="6.78">negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite</sentence>
            <sentence id="6.79">setenvif so speling status unique_id userdir usertrack vhost_alias"</sentence>
            <sentence id="6.80">ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad</sentence>
            <sentence id="6.81">cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en ru"</sentence>
            <sentence id="6.82">USERLAND="GNU" VIDEO_CARDS="i810 fbdev vesa"</sentence>
            <sentence id="6.83">Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS,</sentence>
            <sentence id="6.84">PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS</sentence>
        </paragraph>
    </description>
</bug>
