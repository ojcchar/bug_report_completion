<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bug>
    <id>4614</id>
    <title>npm won't run install after USER switch but works with RUN su instead</title>
    <description>
        <paragraph id="1">
            <sentence id="1.1">getting errors running npm install after switching users within the Dockerfile:</sentence>
        </paragraph>
        <paragraph id="4">
            <sentence id="4.1"># Bundle app source
 ADD .</sentence>
            <sentence id="4.2">/src</sentence>
        </paragraph>
        <paragraph id="6">
            <sentence id="6.1">USER nonroot</sentence>
        </paragraph>
        <paragraph id="8">
            <sentence id="8.1"> Error: Attempt to unlock javascript-brunch@1.7.1, which hasn't been locked</sentence>
            <sentence id="8.9"> If you need help, you may report this *entire* log,</sentence>
            <sentence id="8.10"> including the npm and node versions, at:</sentence>
            <sentence id="8.11"> &lt;http://github.com/npm/npm/issues&gt;</sentence>
            <sentence id="8.12"> ...</sentence>
        </paragraph>
        <paragraph id="9">
            <sentence id="9.1">However, if I replace the 'USER nonroot' line with 'RUN /bin/su nonroot' everything is copacetic.</sentence>
        </paragraph>
    </description>
</bug>
