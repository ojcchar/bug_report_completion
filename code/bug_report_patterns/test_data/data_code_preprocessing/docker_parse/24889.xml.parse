<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bug>
    <id>24889</id>
    <title>Docker and Docker-compose : Auto restart not working (Cannot start a container because of oci runtime error(mkdir ID file exists)</title>
    <description>
        <paragraph id="1">
            <sentence id="1.1">Hello, I have a problem with one of my container (I am using docker-compose version 1.7.1).</sentence>
        </paragraph>
        <paragraph id="2">
            <sentence id="2.1">All my containers are configured with autorestart=always</sentence>
        </paragraph>
        <paragraph id="3">
            <sentence id="3.1">They all restart without any problem when I reboot my server.</sentence>
        </paragraph>
        <paragraph id="4">
            <sentence id="4.1">But if I do :</sentence>
        </paragraph>
        <paragraph id="6">
            <sentence id="6.1">**Sometimes** I have a problem with one container !</sentence>
            <sentence id="6.2">It doesn't restart (always the same container) and when I want to restart it I have this message :</sentence>
        </paragraph>
        <paragraph id="7">
            <sentence id="7.1">'ERROR: for icinga rpc error: code = 6 desc = "mkdir /run/containerd/f850dd365bf7d37d7e2b44aff9ba737654863c9a4da48f487c357d98af613d61: file exists"'</sentence>
        </paragraph>
        <paragraph id="13">
            <sentence id="13.1">**Steps to reproduce the issue:**</sentence>
        </paragraph>
        <paragraph id="14">
            <sentence id="14.1">1 - : Use my docker-compose file :</sentence>
        </paragraph>
        <paragraph id="16">
            <sentence id="16.1">3 - Then, create the container and verify if it's working (default http://ip if you did not change the port 80) :</sentence>
        </paragraph>
        <paragraph id="17">
            <sentence id="17.1">'docker-compose up'</sentence>
        </paragraph>
        <paragraph id="18">
            <sentence id="18.1">3 - Restart Docker daemon</sentence>
        </paragraph>
        <paragraph id="19">
            <sentence id="19.1">'service docker restart'</sentence>
        </paragraph>
        <paragraph id="20">
            <sentence id="20.1">4 - Verify if the container restarted</sentence>
        </paragraph>
        <paragraph id="21">
            <sentence id="21.1">'docker ps'</sentence>
        </paragraph>
        <paragraph id="22">
            <sentence id="22.1">If not, try to start it</sentence>
        </paragraph>
        <paragraph id="23">
            <sentence id="23.1">'docker stard id_container'</sentence>
        </paragraph>
        <paragraph id="24">
            <sentence id="24.1">**Describe the results you received:**</sentence>
            <sentence id="24.2">'ERROR: for icinga rpc error: code = 6 desc = "mkdir /run/containerd/f850dd365bf7d37d7e2b44aff9ba737654863c9a4da48f487c357d98af613d61: file exists"
'</sentence>
        </paragraph>
        <paragraph id="25">
            <sentence id="25.1">**Describe the results you expected:**</sentence>
            <sentence id="25.2">Container was suppose to restart automatically</sentence>
        </paragraph>
        <paragraph id="26">
            <sentence id="26.1">**Additional information you deem important (e.g. issue happens only occasionally):**</sentence>
        </paragraph>
        <paragraph id="27">
            <sentence id="27.1">Sometimes, If I restart the docker daemon one more time, the container restart...</sentence>
        </paragraph>
        <paragraph id="28">
            <sentence id="28.1">Hope it can help</sentence>
        </paragraph>
    </description>
</bug>
