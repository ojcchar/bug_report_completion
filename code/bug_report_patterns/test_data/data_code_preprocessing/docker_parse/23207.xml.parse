<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bug>
    <id>23207</id>
    <title>DNS Resolve Issues when creating overlay network in same subnet as eth0</title>
    <description>
        <paragraph id="7">
            <sentence id="7.1">**Steps to reproduce the issue:**</sentence>
            <sentence id="7.2">1 setup docker swarm</sentence>
            <sentence id="7.3">2 create network on docker swarm using `docker -H :4000 network create test`</sentence>
            <sentence id="7.4">3 run container in this network `docker -H :4000 run -it --net=test busybox bash`</sentence>
            <sentence id="7.5">4 in container run `ping google.com` -&gt; will fail!</sentence>
        </paragraph>
        <paragraph id="8">
            <sentence id="8.1">**Describe the results you received:**</sentence>
            <sentence id="8.2">Ping did not resolve to company internal DNS (10.0.0.1)</sentence>
        </paragraph>
        <paragraph id="9">
            <sentence id="9.1">**Describe the results you expected:**</sentence>
            <sentence id="9.2">Should resolve name using the company iternal DNS</sentence>
        </paragraph>
        <paragraph id="10">
            <sentence id="10.1">**Solution**</sentence>
            <sentence id="10.2">Do not create a network with the same subnet as eth0 of host (10.0.0.0/24).</sentence>
        </paragraph>
        <paragraph id="11">
            <sentence id="11.1">Workaround: Specify subnet in create network, which is different than eth0
e.g. `docker -H :4000 network create --subnet=172.31.0.0/24 --gateway=172.31.0.1 hadoop`</sentence>
        </paragraph>
        <paragraph id="12">
            <sentence id="12.1">Also checkout this gist: https://gist.github.com/plieningerweb/dc83d5133e8bf113f2010e1bc79a9d16</sentence>
        </paragraph>
        <paragraph id="13">
            <sentence id="13.1">**Expected Fix**</sentence>
            <sentence id="13.2">docker network create should not create a network in the same subnet as the hosts' eth0, if this leads to routing issues and (in this case) failure of DNS lookups.</sentence>
        </paragraph>
    </description>
</bug>
