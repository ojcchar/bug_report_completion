<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bug>
    <id>20469</id>
    <title>An RMI Against An Image ID That Fails Causes Image To Be Untagged</title>
    <description>
        <paragraph id="4">
            <sentence id="4.1">Environment details: VM.</sentence>
        </paragraph>
        <paragraph id="5">
            <sentence id="5.1">How reproducible: 100% of the time.</sentence>
        </paragraph>
        <paragraph id="6">
            <sentence id="6.1">Steps to Reproduce:</sentence>
            <sentence id="6.2">1 Run a container with an image using `-d`</sentence>
            <sentence id="6.3">2 `docker rmi image_name:tag`</sentence>
            <sentence id="6.4">The above will complain that there's an active container running.</sentence>
            <sentence id="6.5">Run `docker ps` and `docker images` and note how the image you used in Step 1 is still labeled correctly.</sentence>
            <sentence id="6.6">3 `docker rmi &lt;id&gt;`, where `&lt;id&gt;` is the id of the image you used in the prior step.</sentence>
            <sentence id="6.7">The above will complain that there's an active container running.</sentence>
            <sentence id="6.8">However, now when you run `docker ps` and `docker images`, the image is now untagged.</sentence>
        </paragraph>
        <paragraph id="7">
            <sentence id="7.1">Example:</sentence>
        </paragraph>
        <paragraph id="14">
            <sentence id="14.1">Expected Result: A failed `rmi` against an image id should behave the same as an `rmi` against a name+tag in the sense that it should not mutate anything.</sentence>
        </paragraph>
    </description>
</bug>
