<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bug>
    <id>21563</id>
    <title>Docker re-pushing layers that already exist</title>
    <description>
        <paragraph id="9">
            <sentence id="9.1">**Steps to reproduce the issue:**</sentence>
            <sentence id="9.2">1 push an image</sentence>
            <sentence id="9.3">2 push the same image again</sentence>
        </paragraph>
        <paragraph id="10">
            <sentence id="10.1">See the push logs below.</sentence>
        </paragraph>
        <paragraph id="12">
            <sentence id="12.1">As you can see the layer ID are the same and the final SHA is the same as well.</sentence>
        </paragraph>
        <paragraph id="13">
            <sentence id="13.1">**Describe the results you received:**</sentence>
            <sentence id="13.2">Docker is pushing layers when it does not need to.</sentence>
        </paragraph>
        <paragraph id="14">
            <sentence id="14.1">**Describe the results you expected:**</sentence>
            <sentence id="14.2">To not push layers that already exist in the remote registry</sentence>
        </paragraph>
        <paragraph id="15">
            <sentence id="15.1">**Additional information you deem important (e.g. issue happens only occasionally):**</sentence>
        </paragraph>
        <paragraph id="16">
            <sentence id="16.1">This seeminly started last week at one point.</sentence>
            <sentence id="16.2">Was there a change to the registry in production?</sentence>
            <sentence id="16.3">I've since deleted the repo in our company's docker hub account and tried with a new docker machine (given I'm on OSX).</sentence>
            <sentence id="16.4">This same behavior is happening on other machines with other docker versions.</sentence>
        </paragraph>
    </description>
</bug>
