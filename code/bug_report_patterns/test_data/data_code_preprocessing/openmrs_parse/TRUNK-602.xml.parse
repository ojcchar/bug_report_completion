<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bug>
    <id>TRUNK-602</id>
    <title>Patient Summary module throws NPE on Obs with null values</title>
    <description>
        <paragraph id="1">
            <sentence id="1.1">I just tried out the Patient Summary module in a demo and I got the stack trace below.</sentence>
            <sentence id="1.2">Basically I have a bunch of obs whose concepts are included in the gp patientsummary.notesConceptIds that have value_text is null.</sentence>
            <sentence id="1.3">(I don't know why our demo database has null values in many obs, btw, which is why I'm cc-ing Ellen.)</sentence>
        </paragraph>
        <paragraph id="2">
            <sentence id="2.1">The quick fix would be to add a line in prepareNotes() before line 416 to say:
{code}if (o.getValueText() !</sentence>
            <sentence id="2.2">= null)
{code}</sentence>
        </paragraph>
        <paragraph id="3">
            <sentence id="3.1">Yaw, I can make this change if you want.</sentence>
            <sentence id="3.2">I don't know if I have permission to post a new omod on the module repo though.</sentence>
            <sentence id="3.3">Let me know.</sentence>
        </paragraph>
        <paragraph id="4">
            <sentence id="4.1">java.lang.NullPointerException</sentence>
        </paragraph>
    </description>
</bug>
